## Prompt:
表空间指定的路径必须存在的吗

## Response:
是的——必须存在。  
在 PostgreSQL 中，**创建表空间（tablespace）时指定的目录路径必须是已经存在的空目录**，否则会报错。

更具体一点：

1.  当你执行
    ```sql
    CREATE TABLESPACE myspace LOCATION '/data/pg_tablespace/myspace';
    ```
    PostgreSQL 会检查：
    *   `/data/pg_tablespace/myspace` 这个目录是否 **已经存在**；
    *   PostgreSQL 服务进程（通常是 `postgres` 用户）是否对该目录有 **读写权限**；
    *   目录是否为空（不能包含其他文件）。
2.  如果目录不存在，会出现类似错误：
    ```
    ERROR:  directory "/data/pg_tablespace/myspace" does not exist
    ```
3.  你不能使用相对路径，也不能放在 PostgreSQL 的数据目录 (`$PGDATA`) 里。  
    表空间路径必须是一个**绝对路径**，而且要位于 `$PGDATA` 以外（PostgreSQL 明确禁止放在数据目录下，以避免混乱和备份风险）。



总结一句话：  
**PostgreSQL 不会自动创建表空间目录，路径必须由你手动先创建并赋予权限。**

要正确创建，可以这样操作（假设 PostgreSQL 进程用户为 `postgres`）：

```bash
sudo mkdir -p /data/pg_tablespace/myspace
sudo chown postgres:postgres /data/pg_tablespace/myspace
sudo chmod 700 /data/pg_tablespace/myspace
```

然后在 psql 里执行：

```sql
CREATE TABLESPACE myspace LOCATION '/data/pg_tablespace/myspace';
```

这样就能成功。
